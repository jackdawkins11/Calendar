
<html>
    <head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
    <script>
        function monthToString( i ){
            if( i == 0 ){
                return "January";
            }else if( i == 1 ){
                return "February";
            }else if( i == 2 ){
                return "March";
            }else if( i == 3 ){
                return "April";
            }else if( i == 4 ){
                return "May";
            }else if( i == 5 ){
                return "June";
            }else if( i == 6 ){
                return "July";
            }else if( i == 7 ){
                return "August";
            }else if( i == 8 ){
                return "September";
            }else if( i == 9 ){
                return "October";
            }else if( i == 10 ){
                return "November";
            }else if( i == 11 ){
                return "December";
            }
        }
        function weekdayToString( i ){
            if( i == 0 ){
                return "Sunday";
            }else if( i == 1 ){
                return "Monday";
            }else if( i == 2 ){
                return "Tuesday";
            }else if( i == 3 ){
                return "Wednesday";
            }else if( i == 4 ){
                return "Thursday";
            }else if( i == 5 ){
                return "Friday";
            }else if( i == 6 ){
                return "Saturday";
            }
        }
        var colors = [ "orange", "#996633", "#999966",
            "#669900", "#99ff66", "#3399ff", "#9933ff", "#ff3399", "#ff0000" ];
        var eventId = 0;
        var username;
        var username___;
        var users = [];
        var events = [];
        var monthDisplay;
        function loadUser( username, fullName ){
            var user = {};
            user.username = username;
            user.fullName = fullName;
            if( user.username == username___ ){
                user.color = 'dodgerblue';
            }else{
                for( var i = 0; i < colors.length; i++ ){
                    var taken = false;
                    for( var r = 0; r < users.length; r++ ){
                        if( users[ r ].color == colors[ i ] ){
                            taken = true;
                            break;
                        }
                    }
                    if( !taken ){
                        user.color = colors[ i ];
                        break;
                    }else if( i == colors.length - 1 ){
                        user.color = colors[ Math.random() * colors.length ];
                    }
                }
            }
            users.push( user );
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if( this.readyState == 4
                    && this.status == 200 ){
                    var response = JSON.parse( this.responseText );
                    for( var i = 0; i < response.events.length; i++ ){
                        var newEvent = {};
                        newEvent.username = response.events[ i ].username;
                        newEvent.title = response.events[ i ].title;
                        newEvent.description = response.events[ i ].description;
                        var t = response.events[ i ].startTime.split(/[: -]/);
                        newEvent.startTime = new Date( t[0],t[1]-1,t[2],t[3],t[4],t[5] );
                        var t = response.events[ i ].endTime.split(/[: -]/);
                        newEvent.endTime = new Date( t[0],t[1]-1,t[2],t[3],t[4],t[5] );
                        newEvent.id = eventId;
                        eventId++;
                        events.push( newEvent );
                    }
                    displaySchedule();
                }
            };
            xhr.open( "POST", "loadUserEvents.php" );
            xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr.send( "username=" + user.username );
        }
        function forgetUserData( name ){
            for( var i = 0; i < users.length; i++ ){
                if( users[ i ].username == name ){
                    users.splice( i, 1 );
                    break;
                }
            }
            for( var i = 0; i < events.length; i++ ){
                if( events[ i ].username == name ){ 
                    events.splice( i, 1 );
                    i--;
                }
            }
            displaySchedule();
        }
        var currentFocus = 0;
        function addActive( items ){
            if( items.length == 0 ){
                currentFocus = 0;
                return;
            }
            for( var i = 0; i < items.length; i++ ){
                items[ i ].classList.remove( "autocomplete_active" );
            }
            if( items.length <= currentFocus ){
                currentFocus = 0;
            }
            if( currentFocus < 0 ){
                currentFocus = items.length -1;
            }
            items[ currentFocus ].classList.add( "autocomplete_active" );
        }
        function prepareAutocomplete(){
            document.getElementById( "search_input" ).oninput = function(){
                var val = this.value;
                if( !val ){
                    clearAutocomplete();
                    return;
                }
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function(){
                    if( this.readyState == 4
                        && this.status == 200 ){
                        var response = JSON.parse( this.responseText );
                        addAutocomplete( response.matching );
                    }
                }
                xhr.open( "POST", "autocompleteUsers.php" );
                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                xhr.send( "startOfName=" + val );
            };
            document.getElementById( "search_input" ).onkeydown = function(e){
                var items = document.getElementsByClassName( "autocomplete_items" )[ 0 ]
                    .children;
                if( e.keyCode == 40 ){
                    e.preventDefault();
                    currentFocus++;
                    addActive( items );
                }else if( e.keyCode == 38 ){
                    e.preventDefault();
                    currentFocus--;
                    addActive( items );
                }else if( e.keyCode == 13 ){
                    e.preventDefault();
                    if( 0 <= currentFocus && currentFocus < items.length ){
                        items[ currentFocus ].click();
                    }
                }
            };
        }
        function addAutocomplete( arr ){
            clearAutocomplete();
            var addedAtLeastOne = false;
            for( var i = 0; i < arr.length; i++ ){
                var alreadyLoaded = false;
                for( var r = 0; r < users.length; r++ ){
                    if( users[ r ].username == arr[ i ].username ){
                        alreadyLoaded = true;
                        break;
                    }
                }
                if( alreadyLoaded ){
                    continue;
                }
                addedAtLeastOne = true;
                var b = document.createElement( "DIV" );
                b.classList.add( "autocomplete_item" );
                var b1 = document.createElement( "DIV" );
                b1.classList.add( "autocomplete_item1" );
                b1.innerHTML = arr[ i ].fullName;
                var b2 = document.createElement( "DIV" );
                b2.classList.add( "autocomplete_item2" );
                b2.innerHTML = arr[ i ].username;
                b.appendChild( b1 );
                b.appendChild( b2 );
                var valueHolder = document.createElement( "input" );
                valueHolder.type="hidden";
                valueHolder.value = arr[ i ].username;
                b.appendChild( valueHolder );
                valueHolder = document.createElement( "input" );
                valueHolder.type="hidden";
                valueHolder.value = arr[ i ].fullName;
                b.appendChild( valueHolder );
                b.onclick = function(){
                    var username = this.children[2].value;
                    var fullName = this.children[3].value;
                    loadUser( username, fullName );
                    for( var i = 0; i <users.length; i++ ){
                           if( users[ i ].username == username ){
                                var color = users[ i ].color;
                           }
                    }
                    var newResult = document.createElement( "DIV" );
                    newResult.setAttribute( "class",  "search_result" );
                    newResult.style.border = "2px solid " + color;
                    var newResultValue = document.createElement( "DIV" );
                    newResultValue.setAttribute( "class", "search_result_value" );
                    newResultValue.innerHTML = fullName;
                    var valueHolder = document.createElement( "input" );
                    valueHolder.type = "hidden";
                    valueHolder.value = username;
                    var newResultButton = document.createElement( "BUTTON" );
                    newResultButton.setAttribute( "class", "search_result_close_button" );
                    newResultButton.innerHTML = "X";
                    newResultButton.onclick = function(){
                        forgetUserData( this.children[0].value );
                        this.parentElement.remove();
                    };
                    newResultButton.appendChild( valueHolder );
                    newResult.appendChild( newResultValue );
                    newResult.appendChild( newResultButton );
                    document.getElementById( "search_form" ).appendChild( newResult );
                    document.getElementById( "search_input" ).value = 
                        document.getElementById( "search_input" ).defaultValue;
                    clearAutocomplete();
                };
                document.getElementsByClassName("autocomplete_items")[0].appendChild( b );
            }
            if( addedAtLeastOne ){
                addActive( document.getElementsByClassName( "autocomplete_items" )[ 0 ]
                    .getElementsByTagName( "div" ) );
            }
        }
        function clearAutocomplete(){
            currentFocus = 0;
            var node = document.getElementsByClassName("autocomplete_items")[0];
            while( node.hasChildNodes() ){
                node.removeChild( node.firstChild );
            }
        }
        function checkLogin(){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                if( this.readyState == 4
                    && this.status == 200 ){
                    var response = JSON.parse( this.responseText );
                    if( !response.isLoggedIn ){
                        window.location.href = "index.html";
                    }else{
                        username = response.username;
                        username___ = response.username;
                        loadUser( username, response.fullName );
                    }
                }
            }
            xhr.open( "POST", "checkLogin.php" );
            xhr.send();
        }

        function addTimeSelector( e ){
            var prev = document.getElementsByClassName( "time_selector" );
            for( var i = 0; i < prev.length; i++ ){
                prev[ i ].remove();
            }
            var timeSelector = document.createElement( "div" );
            timeSelector.classList.add( "time_selector" );
            timeSelector.style.overflowY = "scroll";
            timeSelector.style.width = "100px";
            timeSelector.style.maxHeight = "200px";
            timeSelector.style.background = "white";
            timeSelector.style.position = "absolute";
            var box1 = this.getBoundingClientRect();
            var box2 = document.getElementsByClassName( "event_input" )[0]
                        .getBoundingClientRect();
            timeSelector.style.top = (box1.bottom - box2.top) + "px";
            timeSelector.style.left = (box1.left - box2.left) + "px";
            timeSelector.style.display = "flex";
            timeSelector.style.flexDirection = "column";
            var type = this.children[ 0 ].value;
            var input = document.createElement( "input" );
            input.type = "hidden";
            input.value = type;
            timeSelector.appendChild( input );
            if( 2 < type ){
                var ams = [ "am", "pm" ];
                for( var am = 0; am < 2; am++ ){
                    for( var hour = 1; hour < 13; hour++ ){
                        for( var minute = 0; minute < 60; minute+=15 ){
                            var option = document.createElement( "div" );
                            option.style.background = "white";
                            option.style.color = "black";
                            option.addEventListener( "mouseover" , function(){
                                this.style.background = "rgb( 80%, 80%, 80% )";
                            } );
                            option.addEventListener( "mouseleave" , function(){
                                this.style.background = "white";
                            } );
                            option.style.fontSize = "16pt";
                            option.addEventListener( "click", function(event){
                                var type = this.parentNode.getElementsByTagName( "input" )[0].value;
                                var date = document.getElementsByClassName( "event_input_date_holder" )
                                    [0];
                                date.children[ type ].value = this.innerHTML;
                                this.parentNode.remove();
                                event.stopPropagation();
                            } );
                            option.innerHTML = hour
                                + ":" + (minute < 10 ? "0" + minute : minute ) + ams[ am ];
                            timeSelector.appendChild( option );
                        }
                    }
                }
            }else if( type == 0 ){
                for( var i = 0; i < 12; i++ ){
                    var option = document.createElement( "div" );
                    option.style.background = "white";
                    option.addEventListener( "mouseover" , function(){
                        this.style.background = "rgb( 80%, 80%, 80% )";
                    } );
                    option.addEventListener( "mouseleave" , function(){
                        this.style.background = "white";
                    } );
                    option.style.fontSize = "16pt";
                    option.addEventListener( "click", function(event){
                        var type = this.parentNode.getElementsByTagName( "input" )[0].value;
                        var date = document.getElementsByClassName( "event_input_date_holder" )[0];
                        date.children[ type ].value = this.innerHTML;
                        this.parentNode.remove();
                        event.stopPropagation();
                    } );
                    option.innerHTML = monthToString( i ).substring(0,3);
                    timeSelector.appendChild( option );
                }
            }else if( type == 1 ){
                for( var i = 1; i <= 31; i++ ){
                    var option = document.createElement( "div" );
                    option.style.background = "white";
                    option.addEventListener( "mouseover" , function(){
                        this.style.background = "rgb( 80%, 80%, 80% )";
                    } );
                    option.addEventListener( "mouseleave" , function(){
                        this.style.background = "white";
                    } );
                    option.style.fontSize = "16pt";
                    option.addEventListener( "click", function(event){
                        var type = this.parentNode.getElementsByTagName( "input" )[0].value;
                        var date = document.getElementsByClassName( "event_input_date_holder" )[0];
                        date.children[ type ].value = this.innerHTML;
                        this.parentNode.remove();
                        event.stopPropagation();
                    } );
                    option.innerHTML = i;
                    timeSelector.appendChild( option );
                }
            }else if( type == 2 ){
                for( var i = 1990; i<=2050; i+=1 ){
                    var option = document.createElement( "div" );
                    option.style.background = "white";
                    option.addEventListener( "mouseover" , function(){
                        this.style.background = "rgb( 80%, 80%, 80% )";
                    } );
                    option.addEventListener( "mouseleave" , function(){
                        this.style.background = "white";
                    } );
                    option.style.fontSize = "16pt";
                    option.addEventListener( "click", function(event){
                        var type = this.parentNode.getElementsByTagName( "input" )[0].value;
                        var date = document.getElementsByClassName( "event_input_date_holder" )[0];
                        date.children[ type ].value = this.innerHTML;
                        this.parentNode.remove();
                        event.stopPropagation();
                    } );
                    option.innerHTML = i;
                    timeSelector.appendChild( option );
                }
            }
            document.getElementsByClassName( "event_input" )[ 0 ].appendChild( timeSelector );
            this.dispatchEvent( new Event('input') );
            this.dispatchEvent( new Event('keydown') );
        }
        function prepareButtons(){
            document.getElementById( "log_out_button" ).onclick = function(){
                var xhr = new XMLHttpRequest();
                xhr.open( "POST", "logout.php" );
                xhr.send();
                window.location.href = "index.html";
            };
            document.getElementById( "calendar_left_button" )
                .onclick = function(){
                monthDisplay.previousMonth();
                displayCalendarIcon();
            };
            document.getElementById( "calendar_right_button" )
                .onclick = function(){
                monthDisplay.nextMonth();
                displayCalendarIcon();
            };
            document.getElementById( "calendar_wrapper" )
                .onclick = function( event ){
                var boundingRect = this.getBoundingClientRect();
                var x = event.clientX - boundingRect.left;
                var y = event.clientY - boundingRect.top;
                var sqX = Math.floor( x / 30 );
                var sqY = Math.floor( y / 30 );
                if( 2 <= sqY ){
                    sqY -= 2;
                    monthDisplay.setSelectedDate( sqY * 7 + sqX );
                    displayCalendarIcon();
                    displaySchedule();
                }
            };
            document.addEventListener( "click", function( e ){
                clearAutocomplete();
                var popUps = document.getElementsByClassName( "event_info" );
                if( ( popUps.length ) == 1 ){
                    if( popUps.length == 1 ){
                        var popUp = popUps[ 0 ];
                    }else{
                        var popUp = popUps2[ 0 ];
                    }
                    var rect = popUp.getBoundingClientRect();
                    if( !( rect.left <= e.clientX 
                        && rect.top <= e.clientY
                        && e.clientX <= rect.right
                        && e.clientY <= rect.bottom ) ){
                        popUp.remove();
                    }
                }else if( 0 < ( popUps.length ) ){
                    for( var i = popUps.length - 1; 0 <= i; i-- ){
                        popUps[ i ].remove();
                    }
                }
            });
            document.getElementById( "new_event_button" )
                .addEventListener( "click", function(event){
                var background = document.createElement( "div" );
                background.style.position = 'fixed';
                background.style.height = "100%";
                background.style.width = "100%";
                background.style.top = "0px";
                background.style.right = "0px";
                background.style.bottom = "0px";
                background.style.left = "0px";
                background.style.display = "flex";
                background.style.justifyContent = "center";
                background.style.alignItems = "center";
                background.style.background = "rgb( 60%, 60%, 60%, 40% )";
                document.body.appendChild( background );
                var eventInput = document.createElement( "div" );
                eventInput.classList.add( "event_input" );          //.event_input  
                background.appendChild( eventInput );
                var header = document.createElement( "div" );
                header.classList.add( "event_input_title" );        //.event_input_title
                header.addEventListener( "click", function(){
                    document.getElementsByClassName( "event_input_title_input" )[ 0 ]
                        .focus();
                });
                eventInput.appendChild( header );
                var titleInputLabel = document.createElement( "div" );
                titleInputLabel.classList.add( "event_input_title_text" );    //.event_input_title_text
                titleInputLabel.innerHTML = "Add title";
                header.appendChild( titleInputLabel );
                var titleInput = document.createElement( "input" );         //.event_input_title_input
                titleInput.onkeydown = function(e){
                    if( e.keyCode == 13 ){
                        document.getElementsByClassName( "event_input_date_holder" )
                           [0].children[0].focus();
                    }
                };
                titleInput.classList.add( "event_input_title_input");
                header.appendChild( titleInput );
                background.onclick = function( e ){
                    var boxes = [];
                    boxes[0] = document.getElementsByClassName( "event_input" )[0]
                        .getBoundingClientRect();
                    var inside = false;
                    for( var i = 0; i < boxes.length; i++ ){
                        if( ( boxes[ i ].left <= e.clientX
                            && e.clientX <= boxes[ i ].right
                            && boxes[ i ].top <= e.clientY
                            && e.clientY <= boxes[ i ].bottom ) ){
                            inside = true;
                        }
                    }
                    if( !inside ){
                        this.remove();
                    }
                };
                var curDate = new Date();
                var dateHolder = document.createElement( "div" );
                dateHolder.classList.add( "event_input_date_holder" );
                var date1 = document.createElement( "input" );
                var typeHolder = document.createElement( "input" );
                typeHolder.type="hidden";
                typeHolder.value = 0;
                date1.value = monthToString( curDate.getMonth() ).substring( 0, 3 );
                date1.style.width="15%";
                dateHolder.appendChild( date1 );
                date1.appendChild( typeHolder );
                var date2 = document.createElement( "input" );
                typeHolder = document.createElement( "input" );
                typeHolder.type="hidden";
                typeHolder.value = 1;
                date2.value = curDate.getDate() ;
                date2.style.width="10%";
                dateHolder.appendChild( date2 );
                date2.appendChild( typeHolder );
                var date3 = document.createElement( "input" );
                typeHolder = document.createElement( "input" );
                typeHolder.type="hidden";
                typeHolder.value = 2;
                date3.value = curDate.getFullYear() ;
                date3.style.width="15%";
                dateHolder.appendChild( date3 );
                date3.appendChild( typeHolder );
                var date4 = document.createElement( "input" );
                typeHolder = document.createElement( "input" );
                typeHolder.type="hidden";
                typeHolder.value = 3;
                var h = curDate.getHours();
                var m = curDate.getMinutes();
                date4.value = ( h > 12 ? h - 12 : h ) + ":" + (m < 10 ? "0" + m : m )
                    + ( h < 12 ? "am" : "pm" );
                date4.style.width="25%";
                dateHolder.appendChild( date4 );
                date4.appendChild( typeHolder );
                var date5 = document.createElement( "div" );
                date5.style.display = "flex";
                date5.style.flexDirection = "column";
                date5.style.justifyContent = "center";
                var date55 = document.createElement( "div" );
                date55.innerHTML = "-" ;
                date5.appendChild( date55 );
                dateHolder.appendChild( date5 );
                var date6 = document.createElement( "input" );
                typeHolder = document.createElement( "input" );
                typeHolder.type="hidden";
                typeHolder.value = 5;
                date6.style.width="25%";
                date6.appendChild( typeHolder );
                h ++;
                date6.value = ( h > 12 ? h - 12 : h ) + ":" + (m < 10 ? "0" + m : m )
                    + ( h < 12 ? "am" : "pm" );
                dateHolder.appendChild( date6 );
                date6.appendChild( typeHolder );
                eventInput.appendChild( dateHolder );
                eventInput.addEventListener( "click", function(e){
                    var nodes = document.getElementsByClassName( "time_selector" );
                    for( var i = 0; i < nodes.length; i++ ){
                        nodes[ i ].remove();
                    }
                } );
                var inputs = document.getElementsByClassName( "event_input_date_holder" )[0]
                    .children;
                for( var i  =0; i < inputs.length; i++ ){
                    if( i == inputs.length - 2 ){
                        continue;
                    }
                    inputs[ i ].style.outline = 'none';
                    inputs[ i ].addEventListener( 'focus', addTimeSelector );
                    inputs[ i ].onclick = function(e){
                        e.stopPropagation();
                    };
                    inputs[ i ].oninput = function(){
                        var items_ = document.getElementsByClassName( "time_selector" )[0]
                            .children;
                        var items = [];
                        for( var i = 1; i < items_.length; i++ ){
                            items.push( items_[ i ] );
                        }
                        var start = this.value;
                        for( var i = 0; i < items.length; i++ ){
                            if( items[i].innerHTML.substring( 0, start.length ).toLowerCase()
                                == start.toLowerCase() ){
                                items[i].style.display = 'block';
                            }else{
                                items[i].style.display = 'none';
                            }
                        }
                    };
                    var activeLabel = document.createElement( "input" );
                    activeLabel.type = "hidden";
                    activeLabel.value = 0;
                    inputs[ i ].appendChild( activeLabel );
                    inputs[ i ].onkeydown = function(e){
                        var value = this.children[ 1 ].value;
                        var items_ = document.getElementsByClassName( "time_selector" )[0]
                            .children;
                        var items = [];
                        for( var i = 1; i < items_.length; i++ ){
                            if( items_[ i ].style.display != 'none' ){
                                items.push( items_[ i ] );
                            }
                        }
                        if( items.length == 0 ){
                            var idx = 0;
                            var siblings = this.parentNode.children;
                            for( var i = 0; i < siblings.length; i++ ){
                                if( siblings[ i ] == this ){
                                    idx = i;
                                    break;
                                }
                            }
                            if( e.keyCode == 13 ){
                                e.preventDefault();
                                if( idx == 3 ){
                                    siblings[ 5 ].focus();
                                }else if( idx < 3 ){
                                    siblings[ idx + 1 ].focus();
                                }else if( idx == 5 ){
                                    document.getElementsByClassName( "description_text_field" )[0]
                                        .focus();
                                }
                           }
                            return;
                        }
                        if( e.keyCode == 40 ){
                            e.preventDefault();
                            items[ value ].style.background = 'white';
                            value++;
                            if( items.length <= value ){
                                value = 0;
                            }
                            items[ value ].style.background = 'dodgerblue';
                            items[ value ].scrollIntoView(false);
                        }else if( e.keyCode == 38 ){
                            e.preventDefault();
                            items[ value ].style.background = 'white';
                            value--;
                            if( value < 0 ){
                                value = items.length - 1;
                            }
                            items[ value ].style.background = 'dodgerblue';
                            items[ value ].scrollIntoView();
                        }else if( e.keyCode == 13 ){
                            e.preventDefault();
                            if( value < items.length ){
                                items[ value ].click();
                            }
                            var idx = 0;
                            var siblings = this.parentNode.children;
                            for( var i = 0; i < siblings.length; i++ ){
                                if( siblings[ i ] == this ){
                                    idx = i;
                                    break;
                                }
                            }
                            if( idx == 3 ){
                                siblings[ 5 ].focus();
                                return;
                            }else if( idx < 3 ){
                                siblings[ idx + 1 ].focus();
                                return;
                           }else if( idx == 5 ){
                                document.getElementsByClassName( "description_text_field" )[0]
                                    .focus();
                                return;
                           }
                            
                        }
                        this.children[ 1 ].value = value;
                    };
                }
                var desc = document.createElement( "div" );
                desc.style.display = 'flex';
                desc.style.flexDirection = 'column';
                desc.style.margin = "10px";
                desc.style.border = "1px solid rgb(70%, 70%, 70%)";
                desc.style.padding = '10px';
                desc.classList.add( "event_input_description" );
                var descLabel = document.createElement( "div" );
                descLabel.innerHTML = "Add description";
                descLabel.style.color = "rgb(70%, 70%, 70%)";
                descLabel.style.fontSize = '13pt';
                descLabel.style.fontSize = '13pt';
                desc.onclick = function(){
                    this.children[1].focus();
                };
                var descInput = document.createElement( "textarea" );
                descInput.style.fontSize = '12pt';
                descInput.cols = 40;
                descInput.rows = 4;
                descInput.style.resize = 'none';
                descInput.style.border = 'none';
                descInput.style.outline = 'none';
                desc.appendChild( descLabel );
                desc.appendChild( descInput );
                eventInput.appendChild( desc );
                var button = document.createElement( "div" );
                button.style.display = 'flex';
                button.style.justifyContent = 'flex-end';
                button.style.width = '100%';
                button.style.paddingRight = '10px';
                button.style.paddingBottom = '10px';
                var button2 = document.createElement( "div" );
                button2.style.border='none';
                button2.style.color='white';
                button2.style.background = 'dodgerblue';
                button2.style.borderRadius = '5px';
                button2.innerHTML = 'Save';
                button2.style.padding = '5px';
                button2.style.fontSize = '15pt';
                button2.style.cursor = "pointer";
                button2.onclick = function(){
                    var oldMessages = document.getElementsByClassName( "event_input_fail_message" );
                    for( var i = 0; i < oldMessages.length; i++ ){
                        oldMessages[ i ].remove();
                    }
                    function parseInputs(){
                        var title = document.getElementsByClassName( "event_input_title_input" )[0]
                            .value;
                        if( title.length > 100 ){
                          var obj = {};
                          obj.fail = true;
                          obj.message = "Title must be less than 100 characters";
                          return obj;
                        }
                        var monthStr = document.getElementsByClassName( "event_input_date_holder" )[0]
                            .children[0].value;
                        for(var i = 0; i < 12; i++ ){
                            if( monthToString( i ).substring( 0, 3 ).toLowerCase()
                                == monthStr.toLowerCase() ){
                                i++;
                                if( i < 10 ){
                                    var month = "0" + i;
                                }else{
                                    var month = i + "";
                                }
                                break;
                            }else{
                                if( i == 11 ){
                                    var obj = {};
                                    obj.fail = true;
                                    obj.message = "Please enter a valid month";
                                    return obj;
                                }
                            }
                        }
                        var year = document.getElementsByClassName( "event_input_date_holder" )[0]
                            .children[2].value + "";
                        if( !/^(19|20)\d{2}$/.test( year ) ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid year";
                            return obj;
                        }
                        var day = document.getElementsByClassName( "event_input_date_holder" )[0]
                            .children[1].value;
                        if( !/^\d{1,2}$/.test( day )
                            || day > 31 ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid day of the month";
                            return obj;
                        }
                        if( day < 10 ){
                            day = "0" + day;
                        }else{
                            day = day + "";
                        }
                        var starttime = document.getElementsByClassName( "event_input_date_holder" )[0]
                            .children[3].value;
                        if( starttime.substring( starttime.length -2, starttime.length )
                            == "am" ){
                            var starthour = 0;
                        }else if( starttime.substring( starttime.length -2, starttime.length )
                            == "pm" ){
                            var starthour = 12;
                        }else{
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid start time";
                            return obj;
                        }
                        var sep = starttime.indexOf( ":" );
                        if( sep == -1 ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid start time";
                            return obj;
                        }
                        if( !/^\d{1,2}$/.test( starttime.substring( 0, sep ) ) ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid start time";
                            return obj;
                        }
                        starthour += parseInt( starttime.substring( 0, sep ) );
                        if( !/^\d{2}$/.test( starttime.substring( sep+1, sep+3 ) ) ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid start time";
                            return obj;
                        }
                        var startminute = parseInt( starttime.substring( sep+1, sep + 3 ) );
                        var startTimeString = year + "-" + month + "-" + day
                            + " " + starthour + ":"
                            + ( startminute < 10 ? "0" + startminute : startminute ) + ":00";
                        var endtime = document.getElementsByClassName( "event_input_date_holder" )[0]
                            .children[5].value;
                        if( endtime.substring( endtime.length -2, endtime.length )
                            == "am" ){
                            var endhour = 0;
                        }else if( endtime.substring( endtime.length -2, endtime.length )
                            == "pm" ){
                            var endhour = 12;
                        }else{
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid end time";
                            return obj;
                        }
                        var sep = endtime.indexOf( ":" );
                        if( sep == -1 ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid end time";
                            return obj;
                        }
                        if( !/^\d{1,2}$/.test( endtime.substring( 0, sep ) ) ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid end time";
                            return obj;
                        }
                        endhour += parseInt( endtime.substring( 0, sep ) );
                        if( !/^\d{2}$/.test( endtime.substring( sep+1, sep+3 ) ) ){
                            var obj = {};
                            obj.fail = true;
                            obj.message = "Please enter a valid end time";
                            return obj;
                        }
                        var endminute = parseInt( endtime.substring( sep+1, sep + 3 ) );
                        var endTimeString = year + "-" + month + "-" + day
                            + " " + endhour + ":"
                            + ( endminute < 10 ? "0" + endminute : endminute ) + ":00";
                        var obj = {};
                        obj.fail = false;
                        obj.title = title;
                        obj.startTime = startTimeString;
                        obj.endTime = endTimeString;
                        obj.description = document.getElementsByClassName( "event_input_description" )
                            [0].children[1].value;
                        if( obj.title == "" ){
                            obj.title += " ";
                        }
                        if( obj.description == "" ){
                            obj.description += " ";
                        }
                        if( obj.description.length > 100 ){
                          var obj = {};
                          obj.fail = true;
                          obj.message = "Description must be less than 100 characters";
                          return obj;
                        }
                        return obj;
                    }
                    var obj = parseInputs();
                    if( obj.fail ){
                        var failMessage = document.createElement( "div" );
                        failMessage.style.textAlign = "center";
                        failMessage.innerHTML = obj.message;
                        failMessage.style.height = "30px";
                        failMessage.style.color = 'red';
                        failMessage.classList.add( "event_input_fail_message" );
                        document.getElementsByClassName( "event_input_description" )[0]
                            .after( failMessage );
                    }else{
                        var xhr = new XMLHttpRequest();
                        xhr.onreadystatechange = function(){
                            if( this.readyState == 4 
                                && this.status == 200 ){
                                document.getElementsByClassName( "event_input" )[0]
                                    .parentNode.remove();
                                for( var i = 0; i < users.length; i++ ){
                                    if( users[ i ].username == username ){
                                        var fullname = users[ i ].fullName;
                                    }
                                }
                                forgetUserData( username );
                                loadUser( username, fullname );
                                displaySchedule();
                            }
                        };
                        xhr.open( "POST", "addEvent.php" );
                        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                        xhr.send( "username=" + username
                            + "&title=" + obj.title
                            + "&description=" + obj.description
                            + "&startTime=" + obj.startTime
                            + "&endTime=" + obj.endTime );
                    }
                };
                button.appendChild( button2 );
                eventInput.appendChild( button );
                titleInput.focus();
                descInput.classList.add( "description_text_field" );
            } );
        }
        class MonthDisplay {
            constructor(){
                this.displayedMonth = new Date();
                this.selectedDate = new Date();
            }
            nextMonth(){
                this.displayedMonth.setMonth( this.displayedMonth.getMonth() + 1 );
            }
            previousMonth(){
                this.displayedMonth.setMonth( this.displayedMonth.getMonth() - 1 );
            }
            getSelectedDate(){
                return new Date( this.selectedDate.toDateString() );
            }
            setSelectedDate( sq ){
                var firstOfMonth = new Date( this.displayedMonth.toDateString() );
                firstOfMonth.setDate( 1 );
                while( firstOfMonth.getDay() != 0 ){
                    firstOfMonth.setDate( firstOfMonth.getDate() - 1 );
                }
                firstOfMonth.setDate( firstOfMonth.getDate() + sq );
                this.selectedDate = new Date( firstOfMonth.toDateString() );
                this.displayedMonth = new Date( firstOfMonth.toDateString() );
            }
            showSelectedDate(){
                return this.displayedMonth.getMonth()
                    == this.selectedDate.getMonth()
                    && this.displayedMonth.getYear()
                    == this.selectedDate.getYear();
            }
            getLabel(){
                var label = "";
                if( this.displayedMonth.getMonth() == 0 ){
                    label += "January";
                }else if( this.displayedMonth.getMonth() == 1 ){
                    label += "February";
                }else if( this.displayedMonth.getMonth() == 2 ){
                    label += "March";
                }else if( this.displayedMonth.getMonth() == 3 ){
                    label += "April";
                }else if( this.displayedMonth.getMonth() == 4 ){
                    label += "May";
                }else if( this.displayedMonth.getMonth() == 5 ){
                    label += "June";
                }else if( this.displayedMonth.getMonth() == 6 ){
                    label += "July";
                }else if( this.displayedMonth.getMonth() == 7 ){
                    label += "August";
                }else if( this.displayedMonth.getMonth() == 8 ){
                    label += "September";
                }else if( this.displayedMonth.getMonth() == 9 ){
                    label += "October";
                }else if( this.displayedMonth.getMonth() == 10 ){
                    label += "November";
                }else if( this.displayedMonth.getMonth() == 11 ){
                    label += "December";
                }
                return label + " " + this.displayedMonth.getFullYear();
            }
            getMonthDayNumbers(){
                var day = new Date( this.displayedMonth.toDateString() );
                day.setDate( 1 );
                while( day.getDay() != 0 ){
                    day.setDate( day.getDate() - 1 );
                }
                var dayNumbers = [];
                var inCurrent = false;
                for( var i = 0; i < 6 * 7; i += 1 ){
                    if( day.getDate() == 1 ){
                        if( inCurrent ){
                            inCurrent = false;
                        }else{
                            inCurrent = true;
                        }
                    }
                    dayNumbers.push( [ new Date( day.toDateString() ), inCurrent ] );
                    day.setDate( day.getDate() + 1 );
                }
                return dayNumbers;
            }
            getWeekDays(){
                var day = new Date( this.selectedDate.toDateString() );
                day.setDate( day.getDate() -day.getDay() );
                var dayNumbers = [];
                for( var i = 0; i < 7; i++ ){
                    dayNumbers.push( new Date( day.toDateString() ) );
                    day.setDate( day.getDate() + 1 );
                }
                return dayNumbers;
            }
        }
        function displayCalendarIcon(){
            document.getElementById( "calendar_date" )
                .innerHTML = monthDisplay.getLabel();
            var dayNumbers = monthDisplay.getMonthDayNumbers();
            var selectedDate = monthDisplay.getSelectedDate();
            var row = document.getElementById( "calendar_wrapper" )
                .children[ 2 ];
            for( var i = 0; i < 6; i++ ){
                var square = row.children[ 0 ];
                for( var r = 0; r < 7; r++ ){
                    square.innerHTML = dayNumbers[ i * 7 + r ][ 0 ].getDate();
                    if( dayNumbers[ i * 7 + r ][ 1 ] ){
                        square.style.color = 'rgba( 40%, 40%, 40%, 100% )';
                    }else{
                        square.style.color = 'rgba( 60%, 60%, 60%, 100% )';
                    }
                    if( new Date().getDate() == dayNumbers[ i * 7 + r ][ 0 ].getDate()
                        && new Date().getMonth() == dayNumbers[ i * 7 + r ][ 0 ].getMonth() ){
                        square.style.borderRadius = "50%";
                        square.style.background = "rgb(10%, 45%, 90%)";
                        square.style.color = "white";
                    }else if( selectedDate.getDate() == dayNumbers[ i * 7 + r ][ 0 ].getDate()
                        && selectedDate.getMonth() == dayNumbers[ i * 7 + r ][ 0 ].getMonth() ){
                        square.style.borderRadius = "50%";
                        square.style.background = "rgba(40%, 65%, 90%, 30%)";
                    }else{
                        square.style.borderRadius = "none";
                        square.style.background = "white";
                    }
                    square = square.nextElementSibling;
                }
                row = row.nextElementSibling;
            }
        }
        function sameDay( time1, time2 ){
            return time1.getDate() == time2.getDate()
                && time1.getMonth() == time2.getMonth()
                && time1.getFullYear() == time2.getFullYear();
        }
        function displaySchedule(){
            var prevEvents = document.getElementsByClassName( "schedule_event" );
            for( var i = prevEvents.length - 1; 0 <= i; i-- ){
                prevEvents[ i ].remove();
            }
            var days = monthDisplay.getWeekDays();
            var column = document.getElementsByClassName( "schedule_column" )[ 0 ];
            for( i = 0; i < 7; i++ ){
                column.children[ 0 ].children[ 1 ].innerHTML = days[ i ].getDate();
                if( sameDay( new Date(), days[ i ] ) ){
                    column.children[ 0 ].children[ 1 ].style.color = "white";
                    column.children[ 0 ].children[ 1 ].style.background = "#1a73e8";
                }else{
                    column.children[ 0 ].children[ 1 ].style.color = "rgb( 10%, 10%, 10%)";
                    column.children[ 0 ].children[ 1 ].style.background = "white";
                }
                for( var j = 0; j < events.length; j++ ){
                    if( sameDay( events[ j ].startTime, days[ i ] )
                        && sameDay( events[ j ].endTime, days[ i ] ) ){
                        var startHour = events[ j ].startTime.getHours();
                        var startMinute = events[ j ].startTime.getMinutes();
                        var endHour = events[ j ].endTime.getHours();
                        var endMinute = events[ j ].endTime.getMinutes();
                        var duration = ( endHour - startHour )
                            + ( endMinute - startMinute ) / 60;
                        var ev = document.createElement( "DIV" );
                        ev.setAttribute( "class", "schedule_event" );
                        ev.innerHTML = events[ j ].title + "<br>"
                            + ( startHour > 12 ? startHour - 12 : startHour )
                            + ":" + ( startMinute < 10 ? "0" + startMinute : startMinute )
                            + " - " + ( endHour > 12 ? endHour - 12 : endHour )
                            + ":" + ( endMinute < 10 ? "0" + endMinute : endMinute );
                        for( var r = 0; r < users.length; r++ ){
                            if( users[ r ].username == events[ j ].username ){
                                ev.style.background = users[ r ].color;
                                break;
                            }
                        }
                        ev.style.marginTop = ( 64 / 60 ) * startMinute + "px";
                        ev.style.height = 64 * duration + "px";
                        ev.onclick = function( event ){
                            var username = "";
                            var fullName = "";
                            var title = "";
                            var description = "";
                            var day = "";
                            var month = "";
                            var date = "";
                            var startHour = 0;
                            var startMinute = 0;
                            var endHour = 0;
                            var endMinute = 0;
                            var id = this.getElementsByTagName( "INPUT" )[ 0 ].value;
                            for( var r = 0; r < events.length; r++ ){
                                if( events[ r ].id == id ){
                                    username = events[ r ].username;
                                    title = events[ r ].title;
                                    description = events[ r ].description;
                                    day = weekdayToString( events[ r ].startTime.getDay() );
                                    month = monthToString( events[ r ].startTime.getMonth() );
                                    dateStr = events[ r ].startTime.getDate();
                                    startHour = events[ r ].startTime.getHours();
                                    startMinute = events[ r ].startTime.getMinutes();
                                    endHour = events[ r ].endTime.getHours();
                                    endMinute = events[ r ].endTime.getMinutes();
                                    break;
                                }
                            }
                            for( var i = 0; i < users.length; i++ ){
                                if( users[ i ].username == username ){
                                    fullName = users[ i ].fullName;
                                    break;
                                }    
                            }
                            var popUp = document.createElement( "div" );
                            popUp.classList.add( "event_info" );
                            var box = document.getElementById( "schedule_wrapper" )
                                .getBoundingClientRect();
                            var scrollTop = document.getElementById( "schedule_wrapper" ).scrollTop;
                            if( event.clientX + 400 > box.right ){
                                popUp.style.left = (event.clientX - box.left - 400) + "px";
                                popUp.style.top = (event.clientY + scrollTop - box.top )+ "px";
                            }else{
                                popUp.style.left = (event.clientX - box.left ) + "px";
                                popUp.style.top = (event.clientY + scrollTop - box.top )+ "px";
                            }
                            var topBar = document.createElement( "div" );
                            topBar.classList.add( "event_info_header" );
                            var close = document.createElement( "i" );
                            close.onclick = function(){
                                this.parentNode.parentNode.remove();
                            }
                            close.innerHTML = "close";
                            close.fontSize = "20px";
                            close.classList.add( "event_info_close" );
                            close.classList.add( "material-icons" );
                            if( username == username___ ){
                            var delet = document.createElement( "i" );
                            delet.onclick = function(){
                                var popup = this.parentNode.parentNode;
                                var title = popup.children[ 1 ].children[1].children[0].innerHTML;
                                if( title == "" ){
                                    title = " ";
                                }
                                var date = popup.children[ 2 ].children[1].children[0].innerHTML
                                    .split(" ");
                                var weekdayString = date[0].substring( 0, date[0].length-1 );
                                var monthString = date[1];
                                for( var i = 0; i < 12; i++ ){
                                    if( monthToString( i ).toLowerCase()
                                        == monthString.toLowerCase() ){
                                        var month = i + 1;
                                        break;
                                    }    
                                }
                                var dayOfMonth = parseInt( date[2] );
                                if( /[ap]/.test( date[3] ) ){
                                    var sameAsOther = false;
                                    var startTime = date[3]
                                        .substring(0 ,/[ap]/.exec( date[3] ).index )
                                        .split( ":" );
                                }else{
                                    var sameAsOther = true;
                                    var startTime = date[3].split( ":" );
                                }
                                var startHour = parseInt( startTime[0] );
                                var startMinute = parseInt( startTime[1] );
                                if( date[5].substring( date[5].match( '[ap]' ).index,
                                    date[5].length ) == 'pm' ){
                                    var endHour = 12;
                                    if( sameAsOther ){
                                        startHour += 12;
                                    }
                                }else{
                                    var endHour = 0;
                                    if( !sameAsOther ){
                                        startHour += 12;
                                    }
                                }
                                var endTime = date[5].substring(0,date[5].match( '[ap]' ).index )
                                    .split( ":" );
                                endHour += parseInt( endTime[0] );
                                var endMinute = parseInt( endTime[1] );
                                var startDate = monthDisplay.getSelectedDate().getFullYear()
                                    + "-" + ( month < 10 ? "0" + month : month )
                                    + "-" + ( dayOfMonth < 10 ? "0" + dayOfMonth : dayOfMonth )
                                    + " " + ( startHour < 10 ? "0" + startHour : startHour )
                                    + ":" + ( startMinute < 10 ? "0" + startMinute : startMinute )
                                    + ":00";
                                var endDate = monthDisplay.getSelectedDate().getFullYear()
                                    + "-" + ( month < 10 ? "0" + month : month )
                                    + "-" + ( dayOfMonth < 10 ? "0" + dayOfMonth : dayOfMonth )
                                    + " " + ( endHour < 10 ? "0" + endHour : endHour )
                                    + ":" + ( endMinute < 10 ? "0" + endMinute : endMinute )
                                    + ":00";
                                var xhr = new XMLHttpRequest();
                                xhr.open( "POST", "deleteEvent.php" );
                                xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                                xhr.onreadystatechange = function(){
                                    if( this.readyState == 4 
                                        && this.status == 200 ){
                                        for( var i = 0; i < users.length; i++ ){
                                            if( users[ i ].username == username ){
                                                var fullname = users[ i ].fullName;
                                            }
                                        }
                                        forgetUserData( username );
                                        loadUser( username, fullname );
                                        displaySchedule();
                                    }
                                };
                                xhr.send( "username=" + username
                                    + "&title=" + title
                                    + "&startTime=" + startDate
                                    + "&endTime=" + endDate );
                                this.parentNode.parentNode.remove();
                            }
                            delet.innerHTML = "delete";
                            delet.fontSize = "20px";
                            delet.classList.add( "event_info_close" );
                            delet.classList.add( "material-icons" );
                            topBar.appendChild( delet );
                           }
                            topBar.appendChild( close );
                            popUp.appendChild( topBar );
                            var header = document.createElement( "div" );
                            header.classList.add( "event_info_title" );
                            var icon = document.createElement( "div" );
                            icon.classList.add( "event_info_icon" );
                            var iconColor = document.createElement( "div" );
                            iconColor.classList.add( "event_info_icon_2" );
                            for( var k = 0; k < users.length; k++ ){
                                if( users[ k ].username == username ){
                                    iconColor.style.background = users[ k ].color;
                                    break;
                                }
                            }
                            icon.appendChild( iconColor );
                            var headerText = document.createElement( "div" );
                            headerText.classList.add( "event_info_text" );
                            var headerText2 = document.createElement( "div" );
                            headerText2.classList.add( "event_info_text_2" );
                            headerText2.innerHTML = title;
                            headerText.appendChild( headerText2 );
                            header.appendChild( icon );
                            header.appendChild( headerText );
                            popUp.appendChild( header );
                            var date = document.createElement( "div" );
                            date.classList.add( "event_info_date" );
                            var dateIcon = document.createElement( "div" );
                            dateIcon.classList.add( "event_info_icon" );
                            var dateText = document.createElement( "div" );
                            dateText.classList.add( "event_info_text" );
                            var dateText2 = document.createElement( "div" );
                            dateText2.classList.add( "event_info_text_2" );
                            var am1 = "", am2 = "";
                            if( 12 <= startHour ){
                                am1 = "pm";
                            }else{
                                am1 = "am";
                            }
                            if( 12 <= endHour ){
                                am2 = "pm";
                            }else{
                                am2 = "am";
                            }
                            dateText2.innerHTML = day + ", " + month + " " + dateStr
                                + " " + ( 12 < startHour ? startHour - 12 : startHour )
                                + ":" + ( startMinute < 10 ? "0" + startMinute : startMinute )
                                + ( am1 == am2 ? "" : am1 )
                                + " - " + ( 12 < endHour ? endHour - 12 : endHour )
                                + ":" + ( endMinute < 10 ? "0" + endMinute : endMinute )
                                + am2;
                            dateText2.style.fontSize = "11pt";
                            dateText.appendChild( dateText2 );
                            date.appendChild( dateIcon );
                            date.appendChild( dateText );
                            popUp.appendChild( date );
                            var descriptionNode = document.createElement( "div" );
                            descriptionNode.classList.add( "event_info_item" );
                            var descIcon = document.createElement( "div" );
                            descIcon.classList.add( "event_info_icon" );
                            var descIconI = document.createElement( "i" );
                            descIconI.innerHTML = "menu";
                            descIconI.classList.add( "event_info_icon_inner" );
                            descIconI.classList.add( "material-icons" );
                            descIcon.appendChild( descIconI );
                            var descText = document.createElement( "div" );
                            descText.classList.add( "event_info_text" );
                            var descText2 = document.createElement( "div" );
                            descText2.classList.add( "event_info_text_2" );
                            descText2.innerHTML = description;
                            descText2.style.fontSize='11pt';
                            descText.appendChild( descText2 );
                            descriptionNode.appendChild( descIcon );
                            descriptionNode.appendChild( descText );
                            popUp.appendChild( descriptionNode );
                            var attendeeNode = document.createElement( "div" );
                            attendeeNode.classList.add( "event_info_item" );
                            var attendeeIcon = document.createElement( "div" );
                            attendeeIcon.classList.add( "event_info_icon" );
                            var aIconI = document.createElement( "i" );
                            aIconI.innerHTML = "person";
                            aIconI.classList.add( "event_info_icon_inner" );
                            aIconI.classList.add( "material-icons" );
                            attendeeIcon.appendChild( aIconI );
                            var attendeeText = document.createElement( "div" );
                            attendeeText.classList.add( "event_info_text" );
                            var attendeeText2 = document.createElement( "div" );
                            attendeeText2.classList.add( "event_info_text_2" );
                            var attendHid = document.createElement( "input" );
                            attendHid.type = "hidden";
                            attendHid.value = username;
                            attendeeText2.appendChild( attendHid );
                            attendeeText2.innerHTML = fullName + "(creator)";
                            attendeeText2.style.fontSize='11pt';
                            attendeeText.appendChild( attendeeText2 );
                            attendeeNode.appendChild( attendeeIcon );
                            attendeeNode.appendChild( attendeeText );
                            popUp.appendChild( attendeeNode );
                            document.getElementById( "schedule_wrapper" ).appendChild( popUp );
                        }
                        var input = document.createElement( "input" );
                        input.type="hidden";
                        input.value=events[ j ].id + "";
                        ev.appendChild( input );
                        column.children[ startHour + 1 ].appendChild( ev );
                    }
                }
                column = column.nextElementSibling;
            }
        }
        window.onload = function(){
            checkLogin();
            prepareButtons();
            prepareAutocomplete();
            monthDisplay = new MonthDisplay();
            displayCalendarIcon();
            displaySchedule();
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
            border-radius: 10px;
        }
        * {
            box-sizing: border-box;
            font-family: sans-serif;
            word-break: break-all;
        }
        button:focus{
            outline:none;
        }
        #screen{
            position: fixed;
            top:0;bottom:0;left:0;right:0;
            width:100%;height:100%;
            display:flex;flex-direction:column;
        }
        /* header */
        #header{
            display: flex; flex-direction: row;
            align-items: center; justify-content:center;
            height:7%;
        }
        #header1{
            width:50%;
            display:flex;flex-direction:row;
            justify-content:flex-start;
            align-items:center;
        }
        #header2{
            width:50%;
            display:flex;flex-direction:row;
            justify-content:flex-end;
            align-items:center;
        }
        #log_out_button{
            border-radius:5px;
            font-size:15pt;
            padding:7px;
            margin-right: 20px;
            background:white;
            border:none;
            color: rgba(30%,30%,30%,100%);
            box-shadow: 1px 1px 1px 1px rgba(50%,50%,50%,50%);
            cursor:pointer;
        }
        #header_heading{
            text-align:center;
            margin-left:40px;
            font-size:25px;
            color: rgb(40%,40%,40%);
        }
        /* main_container */
        #main_container{
            display:flex; flex-direction:row;
            height:93%;
        }
        #left_panel{
            display:flex;flex-direction:column;
            min-width:250px;
        }
        #new_event{
            display:flex;
            align-items:center;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        #new_event_button{
            margin-left:10px;
            border-radius: 20px;
            background: white;
            border:none;
            box-shadow: 1px 1px 1px 1px rgba(50%,50%,50%,50%);
            color: rgba(30%,30%,30%,100%);
            font-size:15pt;
            display:flex;justify-content:center;
            align-items:center;
            cursor:pointer;
        }
        #bigfont {
            font-size:30pt;
            margin-left: 10px;
        }
        #normalfont {
            margin-left: 10px;
            margin-right: 10px;
            font-size:13pt;
        }
        #calendar{
            padding:10px;
            display:flex;justify-content:center;
            align-items:center;
        }
        #calendar_wrapper{
            display:flex; flex-direction: column;
        }
        #calendar_top_row{
            height:30px;
            display: flex; flex-direction:row;
            color: rgba(20%,20%,20%,100%);
        }
        .calendar_row{
            display: flex; flex-direction:row;
            height:30px;
            color: rgba(50%,50%,50%,100%);
        }
        #calendar_date{
            width:50%;
            text-align:center;
        }
        #calendar_buttons{
            display:flex;justify-content:flex-end;
            width:50%;
        }
        #calendar_right_button,
        #calendar_left_button {
            background:none;
            border:none;
            font-size: 13pt;
            cursor:pointer;
        }
        #calendar_right_button:hover,
        #calendar_left_button:hover {
            border: 1px solid grey;
        }
        .calendar_square{
            width:30px;
            font-size:10pt;
            display:flex; justify-content:center;
            align-items:center;
            cursor:pointer;
        }
        .calendar_square:hover{
            border: 1px solid grey;
        }
        #search{
            display:flex;justify-content:center;
            align-items:center;
            flex-direction:column;
        }
        #search_heading{
            width:200px;
            padding:5px;
        }
        #search_form{
            width:200px;
            margin-top:5px;
            display:flex;justify-content:center;
            flex-direction:column;
            align-items:flex-start;
            background: rgba(90%,90%,90%,100%);
            padding:5px;
        }
        .autocomplete {
            position:relative;
            display:inline-block;
        }
        #search_input{
            width:100%;
            background: rgba(90%,90%,90%,100%);
            border:none;
            font-size:13pt;
        }
        #search_input:focus{
            outline:none;
        }
        .autocomplete_items{
            position:absolute;
            z-index:99;
            width: 220px;
            height: 0;
        }
        .autocomplete_item{
            padding: 10px;
            cursor:pointer;
            background:#fff;
            border: 1px solid #d4d4d4;
        }
        .autocomplete_item1{
            font-size:15pt;
        }
        .autocomplete_item2{
            font-size:10pt;
        }
        .autocomplete_items:hover {
            background-color: #e9e9e9;
        }
        .autocomplete_active{
            background-color: DodgerBlue !important;
            color: #ffffff;
        }
        .search_result{
            display:flex;
            border: 2px solid orange;
            border-radius: 25px;
            margin: 5px;
            padding:5px;
            align-items: center;
            margin-bottom:5px;
        }
        .search_result_value{
            font-size: 12pt;
        }
        .search_result_close_button{
            margin-left:5px;
            background:white;
            border-radius:50%;
            border:none;
            font-size:12pt;
            cursor:pointer;
        }
        #right_panel{
            width:100%;
        }
        #schedule_wrapper{
            position:relative;
            width:100%;
            height:100%;
            display:flex;flex-direction:row;
            overflow-y:scroll;
            overflow-x:hidden;
        }
        .schedule_label_column{
            display:flex;flex-direction:column;
            min-height: 1600px;
            min-width: 60px;
        }
        .schedule_column{
            display:flex;flex-direction:column;
            min-height: 1600px;
            width:100%;
        }
        .schedule_slot_top{
            height:64px;
            display: flex; justify-content: center;
            align-items: center; flex-direction:column;
            border: none;
            position: sticky;
            top:0;
            background:white;
        }
        .schedule_slot_top_day{
            font-size:15px;
            color: rgb( 30%, 30%, 30% );
        }
        .schedule_slot_top_date{
            font-size:30px;
            border-radius:50%;
            background:white;
            padding: 5px;
            width:50px;
            height:50px;
            text-align:center;
        }
        .schedule_slot{
            height:64px;
            border-color:rgba( 80%, 80%, 80%, 1 );
            border-style: solid;
            border-width: 1px;
            border-top:none;
            border-left:none;
            display:flex;
        }
        .schedule_slot_label{
            height:64px;
            display: flex; justify-content: flex-end;
            align-items: center;
            border: none;
            margin-right: 10px;
            font-size:10pt;
        }
        .schedule_slot_space_filler{
            height:32px;
            border: none;
        }
        .schedule_event{
            color: white;
            font-size:10pt;
            z-index:99;
            overflow:hidden;
            border-radius:5px;
            cursor:pointer;
        }
        .event_info{
            width: 400px;
            position:absolute;
            background:white;
            border: 1px solid grey;
            z-index:200;
            box-shadow: 0 8px 10px 1px rgba(0,0,0,0.14),
                0 3px 14px 2px rgba(0,0,0,0.12), 0 5px 5px -3px rgba(0,0,0,0.2);
            display:flex;
            flex-direction:column;
            padding:10px;
            border-radius: 5px;
            color: rgb( 30%, 30%, 30% );
        }
        .event_info_header{
            height:30px;
            display:flex;
            justify-content:flex-end;
        }
        .event_info_close{
            margin-left:10px;
            color: rgb( 30%, 30%, 30% );
            background: white;
            border:none;
            font-size:22px;
            cursor:pointer;
        }
        .event_info_title{
            min-height:40px;
            display:flex;
            word-wrap: break-word;
        }
        .event_info_date{
            height:20px;
            display:flex;
            margin-bottom:20px;
        }
        .event_info_item{
            min-height:20px;
            display:flex;
            margin-bottom: 10px;
        }
        .event_info_icon{
            min-width: 60px;
            display: flex;
            justify-content:center;
            align-items:center;
        }
        .event_info_icon_2{
            width:15px;
            height:15px;
            border-radius:3px;
        }
        .event_info_text{
            display:flex;
            flex-direction:column;
            justify-content:center;
        }
        .event_info_text_2{
            font-size:20pt;
        }
        .event_input{
            width: 450px;
            background:white;
            border: 1px solid grey;
            z-index:2000;
            display:flex;
            flex-direction:column;
            align-items:center;
            border-radius: 5px;
            position:absolute;
        }
        .event_input_title{
            color: rgb( 60%, 60%, 60% );
            width:85%;
            display:flex;
            flex-direction:column;
            background: white;
            margin:10px;
            margin-top:20px;
            cursor:text;
            border-bottom: 1px solid blue;
         }
        .event_input_title_text{
            background:none;
            font-size:15pt;
        }
        .event_input_title_input{
            border:none;
            background:none;
            font-size:14pt;
        }
        .event_input_title_input:focus{
            outline:none;
        }
        .event_input_date_holder{
            display:flex;
            flex-direction:row;
            width:70%;
        }
        .event_input_date_holder>input{
            margin:3px;
            border:none;
            background: white;
            font-size:12pt;
            padding:5px;
            text-align:center;
            color: rgb( 20%, 20%, 20% );
        }
        .event_input_date_holder>input:hover{
            background: rgb( 90%, 90%, 90%, 70% );
        }
        .event_input_date_holder>input:focus{
            background: rgb( 90%, 90%, 90%, 70% );
        }
        .event_input_description:hover{
            cursor:text;
        }
    </style>
    </head>
    <body>
        <div id="screen">
            <div id="header">
                <div id="header1">
                    <div id="header_heading">Calendar</div>
                </div>
                <div id="header2">
                    <button id="log_out_button">Log Out</button>
                </div>
            </div>
            <div id="main_container">
                <div id="left_panel">
                    <div id="new_event" >
                        <div id="new_event_button" >
                            <div id="bigfont">+</div><div id="normalfont">New</div>
                        </div>
                    </div>
                    <div id="calendar" >
                        <div id="calendar_wrapper">
                            <div id="calendar_top_row">
                                <div id="calendar_date"></div>
                                <div id="calendar_buttons">
                                    <button id="calendar_left_button">&lt</button>
                                    <button id="calendar_right_button">&gt</button>
                                </div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square">S</div>
                                <div class="calendar_square">M</div>
                                <div class="calendar_square">T</div>
                                <div class="calendar_square">W</div>
                                <div class="calendar_square">T</div>
                                <div class="calendar_square">F</div>
                                <div class="calendar_square">S</div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                            <div class="calendar_row">
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                                <div class="calendar_square"></div>
                            </div>
                        </div>
                    </div>
                    <div id="search" >
                        <div id="search_heading">Meet with...</div>
                        <div id="search_form" >
                            <div class="autocomplete">
                                <input type="text" id="search_input" placeholder="Search for people"/>
                                <div class="autocomplete_items"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="right_panel">
                    <div id="schedule_wrapper">
                        <div class="schedule_label_column">
                            <div class="schedule_slot_space_filler"></div>
                            <div class="schedule_slot_label"></div>
                            <div class="schedule_slot_label">1 AM</div>
                            <div class="schedule_slot_label">2 AM</div>
                            <div class="schedule_slot_label">3 AM</div>
                            <div class="schedule_slot_label">4 AM</div>
                            <div class="schedule_slot_label">5 AM</div>
                            <div class="schedule_slot_label">6 AM</div>
                            <div class="schedule_slot_label">7 AM</div>
                            <div class="schedule_slot_label">8 AM</div>
                            <div class="schedule_slot_label">9 AM</div>
                            <div class="schedule_slot_label">10 AM</div>
                            <div class="schedule_slot_label">11 AM</div>
                            <div class="schedule_slot_label">12 PM</div>
                            <div class="schedule_slot_label">1 PM</div>
                            <div class="schedule_slot_label">2 PM</div>
                            <div class="schedule_slot_label">3 PM</div>
                            <div class="schedule_slot_label">4 PM</div>
                            <div class="schedule_slot_label">5 PM</div>
                            <div class="schedule_slot_label">6 PM</div>
                            <div class="schedule_slot_label">7 PM</div>
                            <div class="schedule_slot_label">8 PM</div>
                            <div class="schedule_slot_label">9 PM</div>
                            <div class="schedule_slot_label">10 PM</div>
                            <div class="schedule_slot_label">11 PM</div>
                            <div class="schedule_slot_space_filler"></div>
                        </div> 
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">SUN</div>
                                <div class="schedule_slot_top_date">1</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div>
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">MON</div>
                                <div class="schedule_slot_top_date">2</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div>
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">TUE</div>
                                <div class="schedule_slot_top_date">3</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div> 
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">WED</div>
                                <div class="schedule_slot_top_date">4</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div> 
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">THU</div>
                                <div class="schedule_slot_top_date">5</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div>
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">FRI</div>
                                <div class="schedule_slot_top_date">6</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div>
                        <div class="schedule_column">
                            <div class="schedule_slot_top">
                                <div class="schedule_slot_top_day">SAT</div>
                                <div class="schedule_slot_top_date">7</div>
                            </div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                            <div class="schedule_slot"></div>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
